(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{992:function(e,t,n){"use strict";(function(e){var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(17)),c=a(n(117)),o=a(n(23)),l=a(n(53)),i=a(n(447)),s=n(242),u=n(1),d=n(116),m=n(445),f=a(n(443)),p=a(n(997)),h=a(n(240)),v=n(444),g=n(996),x=["emailChange","cartItem"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(t){var n=t.photo;return null==n?e.createElement("div",{className:"d-flex skeleton",style:{height:200,width:200}},e.createElement("span",{className:"m-auto title-2"},"Image...")):e.createElement("img",{className:"m-auto col-8 col-md-3 img-cart"+(null==n&&"skeleton"),src:n&&"/assets/"+n})},b=function(t){var n=t.emailChange,a=t.cartItem,c=((0,i.default)(t,x),(0,s.useSelector)((function(e){return e.ContractReducers.contract}))),m=(0,d.useNavigate)(),f=(0,u.useState)(a),v=(0,l.default)(f,2),g=v[0],w=v[1],b=(0,s.useSelector)((function(e){return e.ContractReducers.price}));(0,u.useEffect)((function(){var e=function(){var e=(0,o.default)(r.default.mark((function e(){var t,o,l,i,s,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.myContract,o=a.product_id,l=c.wallet,e.next=5,t.productDetail(o);case 5:return i=e.sent,e.next=8,t.wallets(l);case 8:s=e.sent,u=y(y({},g),{},{email:s.email,name:i.name,photo:i.photo,price:i.price.toNumber(),category:i.category}),n(s.email,u.price),w(u),p.default.get("/product/"+o).then((function(e){w(y(y({},u),{},{rating:e.rating}))})).catch((function(e){}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c&&e()}),[c]);var N=function(e){return/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)};return e.createElement("div",{className:" p-4 d-flex flex-column shadow-lg my-5 corner-rounded-20 bg-white position-relative"},e.createElement("div",{className:"d-flex flex-row shadow-lg corner-rounded-50 text-white px-4",style:{position:"absolute",width:"80%",top:-30,left:20,overflow:"hidden",backgroundColor:"#330270"}},e.createElement("span",{className:"material-icons align-self-center mx-2"},"account_circle"),e.createElement("span",{className:"title-roboto-1 my-2"}," ",g.owner_id)),e.createElement("div",{className:"d-flex flex-column flex-md-row justify-content-between mt-2"},e.createElement(E,{photo:g.photo}),e.createElement("div",{className:"col-12 ms-2 col-md-7 d-flex flex-column"},!g.name&&e.createElement("div",{className:"mx-3 d-flex flex-column justify-content-between my-2",style:{flexGrow:1}},e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"})),g.name&&e.createElement("div",{className:"d-flex flex-row justify-content-between"},e.createElement("div",{className:"title-1 col-10",style:{fontWeight:500}},g.name),e.createElement("div",{className:"col-2 d-flex flex-row justify-content-center align-items-center"},e.createElement("span",{className:"material-icons",style:{color:"#ff29e2"}},"favorite"),e.createElement("span",{className:"title-2"},g.rating))),g.category&&e.createElement("div",{className:"title-noto-2 mt-2"},g.category),g.price>0&&e.createElement("div",{className:"title-2 my-2"},(g.price/b).toFixed(8)," ",e.createElement("img",{src:"/assets/images/BNB.png",style:{height:30,verticalAlign:"top"}})),e.createElement("div",{className:"d-flex flex-row align-items-center"},e.createElement("span",{className:"material-icons"},"forward_to_inbox"),e.createElement("div",{className:"mx-2 title-noto-2 col-8 col-md-7 text-line-1 "+(N(g.email)?"":"text-danger")},N(g.email)?g.email:"Invalid Email Format"),e.createElement("div",{className:"w-100 d-flex flex-row justify-content-end"},e.createElement("div",{className:"btn btn-primary"},e.createElement("span",{className:"material-icons mx-1 d-inline d-md-none ",style:{color:"white"}},"edit"),e.createElement("span",{className:"d-none d-md-inline",onClick:function(){h.default.fire({title:"Change Your Email Here!",html:'<input type="text" id="email" class="swal2-input" placeholder="Username">',confirmButtonText:"Change it",focusConfirm:!1,preConfirm:function(){var e=h.default.getPopup().querySelector("#email").value;return/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e)||h.default.showValidationMessage("Invalid Format Email"),{email:e}}}).then((function(e){var t=e.value&&e.value.email;w(y(y({},g),{},{email:t})),n(t,g.price)}))}},"Change Email")))),e.createElement("div",{className:"corner-rounded-50 fw-bolder btn btn-danger mt-3 py-2 justify-content-center align-self-center text-center",style:{width:"90%"},onClick:function(){return e=g.id,void h.default.fire({title:"Do you want to delete this item?",showDenyButton:!0,confirmButtonText:"Yass",denyButtonText:"Nope"}).then((function(t){t.isConfirmed&&p.default.delete("/cart",{data:[e]}).then((function(e){m(0)})).catch((function(e){}))}));var e}},"Delete"))))},N=function(t){var n=(0,s.useSelector)((function(e){return e.CartReducers})),a=(0,s.useSelector)((function(e){return e.ContractReducers.contract.wallet})),c=(0,s.useSelector)((function(e){return e.ContractReducers.contract.myContract})),i=(0,s.useSelector)((function(e){return e.ContractReducers.price})),x=(0,d.useNavigate)(),w=(0,u.useState)(!1),y=(0,l.default)(w,2),E=y[0],N=y[1],k=function(){var e=(0,o.default)(r.default.mark((function e(){var t,l,s,u,d,v,w,y,E,b,N;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],l=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,s=0;case 3:if(!(s<n.length)){e.next=26;break}if(u=n[s],!l.test(u.email)){e.next=21;break}return d=u.owner_id,g.Loader.show("Initializing Wallet for Confirmation...."),v=(u.price/i).toFixed(8),e.next=11,c.receive(d,{value:m.ethers.utils.parseUnits(v.toString(),"ether")});case 11:return w=e.sent,y=w.gasLimit.toNumber(),E=m.ethers.utils.formatEther(w.gasPrice.toNumber()),b=(y*E).toFixed(8),t.push({buyer_id:a,seller_id:d,product_id:u.product_id,email:u.email,gas:b,price:v,txid:w.hash}),g.Loader.show("Payment Product..."),e.next=19,w.wait();case 19:e.next=23;break;case 21:return h.default.fire({title:"Invalid Format Email",text:"Please Fill Email Correctly",icon:"error",timer:1e3}),e.abrupt("return");case 23:s++,e.next=3;break;case 26:g.Loader.hide(),N=n.map((function(e){return e.id})),f.default.delete("/cart",{data:N}).then((function(e){})).catch((function(e){})),p.default.post("/product/checkout",t).then(function(){var e=(0,o.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){x(0)}));case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.createElement("div",{className:"container d-flex flex-column"},n.map((function(t,n){return e.createElement(b,{cartItem:t,key:n,emailChange:function(e,n){t.email=e,t.price=n}})})),n.length<=0&&e.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center title-1"},e.createElement("i",{className:"material-icons align-self-center mx-2 text-danger",style:{fontSize:100}},"remove_shopping_cart"),e.createElement("div",{className:"title-1 "},"Cart is Empty")),n.length>0&&e.createElement("div",{onClick:function(){return N(!0)},className:"d-flex flex-row justify-content-end btn btn-success align-self-end"}," ","Checkout"," "),e.createElement(v.Modal,{show:E,onHide:function(){return N(!1)},centered:!0},e.createElement(v.Modal.Header,{closeButton:!0},e.createElement(v.Modal.Title,null,"Are You Sure Checkout All Products?")),e.createElement(v.Modal.Body,null),e.createElement(v.Modal.Footer,null,e.createElement(v.Button,{className:"mx-2",variant:"danger",onClick:function(){return N(!1)}},"Cancel"),e.createElement(v.Button,{variant:"primary",onClick:k},"Yes"))))};t.default=N}).call(this,n(1))},996:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=a(n(241)),c={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(0,r.default)("#loaderText").text(e):(0,r.default)("#loaderText").text("Please Wait..."),(0,r.default)("#loader").removeClass("d-none")},hide:function(){(0,r.default)("#loader").addClass("d-none")}};t.Loader=c},997:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),c=a(n(9)),o=a(n(443)),l=a(n(240)),i=n(996),s=function(){function e(){(0,r.default)(this,e)}return(0,c.default)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){o.default.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e)}))}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){i.Loader.show(),o.default.post(e,t).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){a(e)})):a(e)}))}))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){i.Loader.show(),o.default.put("".concat(e,"/").concat(t),n).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){a(t)})).catch((function(e){})):a(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})):r(e)}))}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){i.Loader.show(),o.default.delete("".concat(e),t).then((function(e){var t=e.data;i.Loader.hide(),t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){a(e)})).catch((function(){})):a(e)}))}))}}]),e}(),u=s;t.default=u}}]);