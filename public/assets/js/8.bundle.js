(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{990:function(e,t,n){"use strict";(function(e){var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(17)),c=a(n(117)),o=a(n(23)),l=a(n(53)),s=n(116),i=n(444),u=n(1),d=n(242),m=a(n(997)),f=n(446),p=n(445),v=a(n(443));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(t){var n=t.photo;return null==n?e.createElement("div",{className:"d-flex skeleton",style:{height:300}},e.createElement("span",{className:"m-auto title-2"},"Image...")):e.createElement("img",{className:"d-block image-rounded w-100 "+(null==n&&"skeleton"),src:n&&"/assets/"+n})},y=function(t){var n=t.comment,a=t.person;return e.createElement("div",{className:"card my-3 shadow-sm",style:{padding:0}},e.createElement("div",{className:"card-header"}," ",e.createElement("i",{className:"material-icons mx-1",style:{verticalAlign:"middle"}},"person"),a),e.createElement("div",{className:"card-body"},n))};var x=(0,d.connect)((function(e){return{contract:e.ContractReducers.contract,wallet:e.ContractReducers.contract.wallet,priceBNB:e.ContractReducers.price,profil:e.ContractReducers.contract.profil,cart:e.CartReducers}}),(function(e){return{add:function(t){return e({type:"add",data:t})},delete:function(t){return e({type:"delete",index:t})},updateContract:function(t){return e({type:"update",contract:t})},updateBalance:function(t){return e({type:"balance",price:t})}}}))((function(t){var n=(0,u.useState)(!1),a=(0,l.default)(n,2),c=a[0],d=a[1],h=(0,u.useState)(""),x=(0,l.default)(h,2),E=(x[0],x[1],(0,u.useState)({})),N=(0,l.default)(E,2),k=N[0],b=N[1],C=(0,u.useState)(""),O=(0,l.default)(C,2),P=O[0],j=O[1],B=(0,u.useState)([]),D=(0,l.default)(B,2),S=D[0],_=D[1],A=function(){d(!0)},L=(0,s.useNavigate)(),M=(0,s.useParams)().id;(0,u.useEffect)((function(){var e=function(){var e=(0,o.default)(r.default.mark((function e(){var n,a,c,o,l,s,i,u,d,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contract.myContract,e.prev=1,e.next=4,n.productDetail(M);case 4:a=e.sent,c=a.category,o=a.description,l=a.name,s=a.owner,i=a.photo,u=a.price,d=a.productID,f={category:c,comment:P,description:o,name:l,owner:s,price:u.toNumber(),photo:i,productID:d},m.default.get("/product/"+M).then((function(e){b(w(w({},f),{},{rating:e.rating}))})).catch((function(e){})),b(f),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();e(),v.default.get("/comments",{params:{product_id:M}}).then((function(e){var t=e.data.data;_(t)})).catch((function(e){}))}),[]);var I=function(){var e=(0,o.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.cart,n={product_id:k.productID.toNumber(),user_id:t.wallet,owner_id:k.owner},d(!1),m.default.post("/cart",{data:n}).then((function(e){t.add(n)})).catch((function(e){t.delete(-1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,o.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.contract.myContract,n={text:P,product_id:k.productID.toNumber(),user_id:t.wallet},m.default.post("/comments",{data:n}).then((function(e){L(0)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.createElement("div",{className:"container-xl p-5 row"},e.createElement("div",{className:"col-12 col-md-5"},e.createElement(g,{photo:k.photo}),e.createElement("div",{className:"d-flex flex-row justify-content-center"},e.createElement("div",{className:"w-100 px-4 my-2 align-items-center text-center text-white btn-success btn-rounded shadow ",style:{color:"#018AD7",cursor:"pointer"},onClick:function(){return A}},"Scan Data Blockchain")),t.wallet&&!(t.wallet==k.owner)&&t.profil.name&&e.createElement("div",{className:"w-100 mt-3 py-2 px-5 text-white btn-primary btn-rounded shadow-lg text-center",style:{color:"#018AD7",cursor:"pointer"},onClick:function(){return A}},"Add To Cart"),t.wallet&&!t.profil.name&&e.createElement("div",{className:"w-100 mt-3 py-2 px-5 text-white btn-primary btn-rounded shadow-lg text-center",style:{color:"#018AD7",cursor:"pointer"},onClick:function(){return L("/profile/edit")}},"Update Profil"),!t.wallet&&e.createElement("div",{className:"w-100 mt-3 py-2 px-5 text-white btn-primary btn-rounded shadow-lg text-center",style:{color:"#018AD7",cursor:"pointer"},onClick:function(){(0,f.ConnectBlockchain)(!0).then(function(){var e=(0,o.default)(r.default.mark((function e(n){var a,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateContract(n),localStorage.setItem("login","true"),e.next=4,n.provider.getBalance(n.wallet);case 4:a=e.sent,c=p.ethers.utils.formatEther(a.toString()),t.updateBalance(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))}},"Connect Wallet")),e.createElement("div",{className:"col-12 col-md-7 my-5 my-md-0 align-self-start"},!k.name&&e.createElement("div",{className:"mx-3 d-flex flex-column justify-content-between",style:{flexGrow:1}},e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"})),k.name&&e.createElement("div",{className:"title-1"},k.name),k.name&&e.createElement("div",{className:"font-nato d-flex"},e.createElement("span",{className:"material-icons align-self-center me-1"},"account_circle")," ",k.owner,e.createElement("span",{className:"material-icons align-self-center ms-5 me-1"},"favorite")," ",k.rating),k.name&&e.createElement("div",{className:"d-flex flex-row"},e.createElement("img",{src:"/assets/images/BNB.png",className:"align-self-center",style:{height:30}}),e.createElement("div",{className:"title-2 my-2"},(k.price/t.priceBNB).toFixed(6)," ")),e.createElement("div",{className:"card my-3 shadow-sm"},e.createElement("div",{className:"card-header"},"Description"),!k.description&&e.createElement("div",{className:"mx-3 my-3 d-flex flex-column justify-content-between",style:{flexGrow:1}},e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"})),k.description&&e.createElement("div",{className:"card-body"},k.description))),e.createElement("div",{className:"py-2 px-4 my-4 card-comment shadow-lg d-flex flex-row",style:{backgroundColor:"white"}},e.createElement("div",{className:"circle-outlined align-self-center me-3 "},e.createElement("i",{className:"material-icons",style:{verticalAlign:"middle"}},"person")),e.createElement("input",{className:"form-control",style:{borderWidth:0},placeholder:"Add Comments....",value:P,onChange:function(e){return j(e.target.value)}}),e.createElement("span",{className:"mx-2 align-self-center",style:{cursor:"pointer",color:"#0d0074"},onClick:F},"Send")),function(){if(k.comment)return S.map((function(t,n){return e.createElement(y,{key:n,comment:t.text,person:t.user_id})}))}(),e.createElement(i.Modal,{show:c,onHide:function(){return d(!1)},centered:!0},e.createElement(i.Modal.Header,{closeButton:!0},e.createElement(i.Modal.Title,null,'Are You Sure Add "',k.name,'" to Cart?')),e.createElement(i.Modal.Body,null),e.createElement(i.Modal.Footer,null,e.createElement(i.Button,{className:"mx-2",variant:"danger",onClick:function(){return d(!1)}},"Cancel"),e.createElement(i.Button,{variant:"primary",onClick:I},"Add to Cart"))))}));t.default=x}).call(this,n(1))},996:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=a(n(241)),c={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(0,r.default)("#loaderText").text(e):(0,r.default)("#loaderText").text("Please Wait..."),(0,r.default)("#loader").removeClass("d-none")},hide:function(){(0,r.default)("#loader").addClass("d-none")}};t.Loader=c},997:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),c=a(n(9)),o=a(n(443)),l=a(n(240)),s=n(996),i=function(){function e(){(0,r.default)(this,e)}return(0,c.default)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){o.default.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e)}))}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){s.Loader.show(),o.default.post(e,t).then((function(e){var t=e.data;s.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){console.log("hiding"),s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){console.log("hiding"),a(e)})):a(e)}))}))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){s.Loader.show(),o.default.put("".concat(e,"/").concat(t),n).then((function(e){var t=e.data;s.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){a(t)})).catch((function(e){})):a(t)})).catch((function(e){s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})):r(e)}))}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){s.Loader.show(),o.default.delete("".concat(e),t).then((function(e){var t=e.data;s.Loader.hide(),t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){a(e)})).catch((function(){})):a(e)}))}))}}]),e}(),u=i;t.default=u}}]);