(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1030:function(e,t,n){"use strict";function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}e.exports=r},989:function(e,t,n){"use strict";(function(e){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(17)),c=r(n(91)),o=r(n(23)),l=r(n(53)),i=r(n(1030)),s=n(1),u=r(n(998)),d=r(n(241)),m=n(445),f=n(444),p=n(997),h=n(242),v=n(117),y=r(n(240)),E=r(n(443));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(t){(0,i.default)({},t);var n=(0,h.useSelector)((function(e){return e.ContractReducers.contract.wallet})),r=(0,h.useSelector)((function(e){return e.ContractReducers.price})),c=(0,s.useState)([]),m=(0,l.default)(c,2),p=m[0],y=m[1],b=(0,s.useState)(!0),w=(0,l.default)(b,2),x=w[0],N=w[1];(0,s.useEffect)((function(){n&&E.default.get("/products/owner",{params:{wallet:n}}).then((function(e){var t=e.data.data;y(t),N(!1)})).catch((function(e){}))}),[n]);var S=function(t){var n=t.product,c=(0,v.useNavigate)(),i=(0,s.useState)(n),m=(0,l.default)(i,2),f=m[0],p=m[1],y=(0,s.useRef)(!1),E=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract}));(0,s.useEffect)((function(){y.current=!0;var e=function(){var e=(0,o.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.productDetail(n.id);case 2:(t=e.sent)&&y.current&&(r=t.photo,p(g(g({},f),{},{photo:r})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){return y.current=!1}}),[]);var b=function(e){c(e)};return e.createElement("div",{className:"col-10 mx-2 mx-md-4 col-sm-5 col-md-3 mb-5 rounded shadow-4 p-0 "},e.createElement("div",{className:"btn-overlay image-card"},e.createElement("img",{className:"d-block rounded",src:"/assets/"+f.photo,onClick:function(){b("/item/"+f.id)}}),e.createElement("span",{onClick:function(){b("/edit/"+f.id)},style:{padding:0,cursor:"pointer",top:-10,right:-10}},e.createElement("i",{className:"material-icons",style:{padding:15}},"edit"))),e.createElement("div",{className:"d-flex flex-column p-3"},e.createElement("div",{className:"font-roboto text-line-3 title-barlow-1"},f.name," "),e.createElement("div",{className:"d-flex flex-row justify-content-between"},e.createElement("div",{className:"font-noto fw-bold title-noto-2"},(f.price/r).toFixed(8)," ",e.createElement("img",{src:"/assets/images/BNB.png",style:{height:30}})),e.createElement("div",{className:"title-noto-2",style:{fontSize:18}},"Book")),e.createElement("div",{className:"d-flex flex-row mt-4"},e.createElement("i",{className:"material-icons"},"person"),e.createElement("div",{className:"title-barlow-2 fw-bold text-line-1"},f.owner))),e.createElement("div",{className:"px-3 py-2 d-flex justify-content-center flex-row"},e.createElement("div",{className:"px-3 py-2 font-noto fw-bold d-flex justify-content-center flex-row row",style:{color:"#018AD7",cursor:"pointer"}},e.createElement("div",{className:"switch_box box_1 col-8"},e.createElement("input",{type:"checkbox",checked:"ON"==f.status,className:"switch_1",onChange:function(e){var t=e.target.checked;(0,d.default)(e.target).prop("checked",!t);var n=t?"ON":"OFF";u.default.put("/products",f.id,{status:n}).then((function(n){(0,d.default)(e.target).prop("checked",t)})).catch((function(){}))}})),e.createElement("span",{className:"font-roboto-2 text-center mt-2"},"Published"))))};return e.createElement("div",{className:"mt-5 row justify-content-center"},p.map((function(t,n){return e.createElement(S,{product:t,key:n})})),x&&e.createElement(f.Spinner,{animation:"border",size:"lg"}),p.length<=0&&!x&&e.createElement("div",{className:"d-flex align-items-center flex-column justify-content-center"},e.createElement("i",{className:"material-icons text-danger",style:{fontSize:100}},"search_off"),e.createElement("div",{className:"title-1 "},"You Haven`t Own Any Product")))},x=function(t){var n,r,c,l=t.order,i=t.index,s=t.setmodalShow,d=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),f=((0,h.useSelector)((function(e){return e.ContractReducers.price})),(0,v.useNavigate)()),E=(0,h.useSelector)((function(e){return e.ContractReducers.contract})),b=(0,h.useSelector)((function(e){return e.SocketReducers}));return e.createElement("tr",null,e.createElement("th",{scope:"row"},i),e.createElement("td",null,l.product&&l.product.name),e.createElement("td",null,l.createdAt),e.createElement("td",null,l.status),e.createElement("td",null,e.createElement("div",{className:"d-flex flex-row"},e.createElement(v.Link,{to:"/order/"+l.id,className:"btn btn-primary me-2"},"Check"),"Confirmation"==l.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return s(l)}},"Feedback"),"Waiting"==l.status&&(n=l.createdAt,r=new Date(n),c=new Date,Math.round(Math.abs((r-c)/864e5))>=3)&&e.createElement("button",{className:"btn btn-success",onClick:function(){return e=l.price,void y.default.fire({title:"Refund Your Payment Product",text:"Your Payment Fee is About "+e+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Refund to Wallet"}).then(function(){var t=(0,o.default)(a.default.mark((function t(n){var r,c,o,i,s,h;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isConfirmed){t.next=19;break}return r=m.ethers.utils.parseUnits(e.toString(),"ether"),c=r.toString(),t.prev=3,p.Loader.show("Initializing Wallet for Confirmation...."),t.next=7,d.refund(l.seller_id,c);case 7:return o=t.sent,p.Loader.show("Refund Saldo to your Wallet..."),t.next=11,o.wait();case 11:i=o.gasLimit.toNumber(),s=m.ethers.utils.formatEther(o.gasPrice.toNumber()),h=(i*s).toFixed(8),u.default.post("/order/confirm",{id:l.id,status:"Refund",gas:h,txid:o.hash}).then((function(e){var t=e.data;if(t){var n={to:l.buyer_id==E.wallet?l.seller_id:l.buyer_id,order:[t]};console.log(n),b.emit("send-notif",n)}p.Loader.hide()})).catch((function(e){p.Loader.hide(),f(0)})),t.next=19;break;case 17:t.prev=17,t.t0=t.catch(3);case 19:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e){return t.apply(this,arguments)}}());var e}},"Refund"))))},N=function(t){var n=t.selling,r=t.index,c=t.setmodalSell,l=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),i=((0,h.useSelector)((function(e){return e.ContractReducers.price})),(0,v.useNavigate)()),s=(0,h.useSelector)((function(e){return e.ContractReducers.contract})),d=(0,h.useSelector)((function(e){return e.SocketReducers})),f=function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.default.fire({title:"Claiming Your Payment Product",text:"Your Payment Fee is About "+t+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Claim to Wallet"}).then(function(){var e=(0,o.default)(a.default.mark((function e(r){var c,o,f,h,v,y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=19;break}return c=m.ethers.utils.parseUnits(t.toString(),"ether"),o=c.toString(),e.prev=3,p.Loader.show("Initializing Wallet for Confirmation...."),e.next=7,l.withdraw(o);case 7:return f=e.sent,p.Loader.show(" Claim Saldo to your Wallet..."),e.next=11,f.wait();case 11:h=f.gasLimit.toNumber(),v=m.ethers.utils.formatEther(f.gasPrice.toNumber()),y=(h*v).toFixed(8),u.default.post("/order/confirm",{id:n.id,status:"Claimed",gas:y,txid:f.hash}).then((function(e){var t=e.data;if(t){var r={to:n.buyer_id==s.wallet?n.seller_id:n.buyer_id,order:[t]};d.emit("send-notif",r)}p.Loader.hide(),i(0)})).catch((function(e){p.Loader.hide(),i(0)})),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(3);case 19:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.createElement("tr",null,e.createElement("th",{scope:"row"},r),e.createElement("td",null,n.product&&n.product.name),e.createElement("td",null,n.createdAt),e.createElement("td",null,n.status),e.createElement("td",null,e.createElement("div",{className:"d-flex flex-row"},e.createElement(v.Link,{to:"/order/"+n.id,className:"btn btn-primary me-2"},"Check"),"Waiting"==n.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return c(n)}},"Confirm"),"Finished"==n.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return f(n.price)}},"Claim"))))};var S=function(){var t=(0,s.useState)([]),n=(0,l.default)(t,2),r=n[0],c=n[1],i=(0,s.useState)("myorder"),d=(0,l.default)(i,2),m=d[0],y=d[1],b=(0,s.useState)([]),S=(0,l.default)(b,2),C=S[0],k=S[1],O=(0,s.useState)({}),P=(0,l.default)(O,2),L=P[0],B=P[1],_=(0,s.useState)(!1),j=(0,l.default)(_,2),R=j[0],M=j[1],F=(0,s.useState)(!1),A=(0,l.default)(F,2),D=A[0],T=A[1],W=(0,h.useSelector)((function(e){return e.SocketReducers})),z=(0,h.useSelector)((function(e){return e.ContractReducers.contract.wallet})),Y=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),H=(0,s.useState)({}),K=(0,l.default)(H,2),I=K[0],U=K[1],G=(0,v.useNavigate)();(0,s.useEffect)((function(){var e=function(){var e=(0,o.default)(a.default.mark((function e(){var t,n,r,c,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.wallets(z);case 2:t=e.sent,n=t.email,r=t.name,c=t.photo,o=t.profesi,B({email:n,name:r,photo:c,profesi:o});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!=z&&(e(),E.default.get("/myorder",{params:{user_id:z}}).then((function(e){var t=e.data;c(t.myOrder),k(t.mySelling)})).catch((function(e){})))}),[z]);var J=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.wallets(t.buyer_id);case 2:n=e.sent,r=n.name,U(g(g({},t),{},{buyer:r})),T(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){U(e),M(!0)},Q=function(e){u.default.post("/order/confirm",{id:I.id,status:e}).then((function(e){var t=e.data;if(t){var n={to:I.buyer_id==z?I.seller_id:I.buyer_id,order:[t]};W.emit("send-notif",n)}p.Loader.hide(),G(0)})).catch((function(e){p.Loader.hide(),G(0)}))};return e.createElement("div",{className:"container-xl p-5"},e.createElement("div",{className:"d-flex flex-column flex-md-row justify-content-center my-2"},e.createElement("div",{className:"btn-overlay-bottom align-self-center"},e.createElement("img",{className:"img-card-circle align-self-center",src:L.photo?L.photo:"/assets/images/profilTest.png"}),e.createElement("span",{className:"bg-primary d-inline d-md-none"},e.createElement(v.Link,{to:"/profile/edit",className:"no-style"},e.createElement("i",{className:"material-icons align-self-center p-2",style:{cursor:"pointer"}},"border_color")))),e.createElement("div",{className:"d-flex align-items-center align-items-md-start flex-column justify-content-center mx-2"},e.createElement("div",{className:"title-roboto-1 fw-bold my-1 ",style:{letterSpacing:1}},L.name?L.name:"Unknown Name"),e.createElement("div",{className:"title-noto-2 my-1"},L.email?L.email:"---------------"),e.createElement("div",{className:"title-noto-2 my-1",style:{color:"#666666"}},L.profesi?L.profesi:"---------------")),e.createElement(v.Link,{to:"/profile/edit",className:"no-style"},e.createElement("i",{className:"material-icons align-self-center mx-4 d-none d-md-inline",style:{cursor:"pointer"}},"border_color"))),e.createElement(f.Tab.Container,{id:"left-tabs-example",defaultActiveKey:"galery"},e.createElement(f.Nav,{variant:"pills",className:"flex-row my-3"},e.createElement(f.Nav.Item,{className:"col-12 col-md-6",style:{cursor:"pointer"}},e.createElement(f.Nav.Link,{eventKey:"history",className:"text-center title-roboto-2"},e.createElement("i",{className:"material-icons",style:{verticalAlign:"bottom",fontSize:30}},"history")," ","Activity")),e.createElement(f.Nav.Item,{className:"col-12 col-md-6",style:{cursor:"pointer"}},e.createElement(f.Nav.Link,{eventKey:"galery",className:"text-center title-roboto-2"},e.createElement("i",{className:"material-icons",style:{verticalAlign:"bottom",fontSize:30}},"widgets")," ","My Draft"))),e.createElement(f.Tab.Content,null,e.createElement(f.Tab.Pane,{eventKey:"history"},e.createElement("div",{className:"row"},e.createElement("input",{type:"text",placeholder:"Search .....",className:"shadow-3 rounded-3 p-3 card-search border-0 col-12 col-sm-7"}),e.createElement("select",{className:"shadow-3 rounded-3 p-3 card-search border-0 col-12 col-sm-4 ms-0 ms-sm-5 my-2 my-sm-0","aria-label":"",value:m,onChange:function(e){return y(e.target.value)}},e.createElement("option",{value:"myorder"},"Buying"),e.createElement("option",{value:"mysell"},"Selling"))),e.createElement("div",{className:"table-responsive my-5"},e.createElement("table",{className:"table table-striped"},e.createElement("thead",{className:""},e.createElement("tr",null,e.createElement("th",{scope:"col"},"#"),e.createElement("th",{scope:"col"},"Product Name"),e.createElement("th",{scope:"col"},"Date"),e.createElement("th",{scope:"col"},"Status"),e.createElement("th",{scope:"col"},"Action"))),e.createElement("tbody",null,"myorder"==m?r.map((function(t,n){return e.createElement(x,{key:n,index:n+1,order:t,setmodalShow:q})})):C.map((function(t,n){return e.createElement(N,{key:n,index:n+1,selling:t,setmodalSell:J})}))))),e.createElement(f.Modal,{show:R,onHide:function(){return M(!1)}},e.createElement(f.Modal.Header,{closeButton:!0},e.createElement(f.Modal.Title,{className:"title-1"},"Confirmation Order")),e.createElement(f.Modal.Body,null,e.createElement("div",{className:"title-2"},"Make Sure that you have received your Orders from the Seller!")),e.createElement(f.Modal.Footer,null,e.createElement(f.Button,{variant:"primary",onClick:function(){return Q("Finished")}},"Give Feedback"))),e.createElement(f.Modal,{show:D,onHide:function(){return T(!1)}},e.createElement(f.Modal.Header,{closeButton:!0},e.createElement(f.Modal.Title,{className:"title-1"},"Buying Order")),e.createElement(f.Modal.Body,null,e.createElement("div",{className:"title-2"},"Hoolla, Got your Recent Order from :"),e.createElement("div",{className:"mt-2"},"Buyer`s name :"," ",I.buyer?I.buyer:I.buyer_id),e.createElement("div",null,"Buyer`s Email : ",I.email),e.createElement("div",null,"Order`s Date : ",I.createdAt)),e.createElement(f.Modal.Footer,null,e.createElement(f.Button,{variant:"primary",onClick:function(){return Q("Confirmation")}},"Confirmed")))),e.createElement(f.Tab.Pane,{eventKey:"galery"},e.createElement(w,null)))))};t.default=S}).call(this,n(1))},997:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var a=r(n(241)),c={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(0,a.default)("#loaderText").text(e):(0,a.default)("#loaderText").text("Please Wait..."),(0,a.default)("#loader").removeClass("d-none")},hide:function(){(0,a.default)("#loader").addClass("d-none")}};t.Loader=c},998:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(8)),c=r(n(9)),o=r(n(443)),l=r(n(240)),i=n(997),s=function(){function e(){(0,a.default)(this,e)}return(0,c.default)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){o.default.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){r(e)}))}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){i.Loader.show(),o.default.post(e,t).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})):r(e)}))}))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){i.Loader.show(),o.default.put("".concat(e,"/").concat(t),n).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){r(t)})).catch((function(e){})):r(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){a(e)})):a(e)}))}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){i.Loader.show(),o.default.delete("".concat(e),t).then((function(e){var t=e.data;i.Loader.hide(),t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})).catch((function(){})):r(e)}))}))}}]),e}(),u=s;t.default=u}}]);