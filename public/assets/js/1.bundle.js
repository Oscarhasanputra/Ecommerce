(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{591:function(e,t,n){"use strict";(function(e){var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(21)),c=a(n(171)),o=a(n(301)),l=a(n(64)),s=a(n(601)),i=n(0),u=a(n(599)),d=a(n(170)),m=n(303),f=n(302),p=n(598),h=n(111),v=n(83),y=a(n(169)),E=a(n(300));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(t){(0,s.default)({},t);var n=(0,h.useSelector)((function(e){return e.ContractReducers.contract.wallet})),a=(0,h.useSelector)((function(e){return e.ContractReducers.price})),c=(0,i.useState)([]),m=(0,l.default)(c,2),p=m[0],y=m[1],g=(0,i.useState)(!0),N=(0,l.default)(g,2),w=N[0],x=N[1];(0,i.useEffect)((function(){n&&E.default.get("/products/owner",{params:{wallet:n}}).then((function(e){var t=e.data.data;y(t),x(!1)})).catch((function(e){console.log("")}))}),[n]);var k=function(t){var n=t.product,c=(0,v.useNavigate)(),s=(0,i.useState)(n),m=(0,l.default)(s,2),f=m[0],p=m[1],y=(0,i.useRef)(!1),E=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract}));(0,i.useEffect)((function(){y.current=!0;var e=function(){var e=(0,o.default)(r.default.mark((function e(){var t,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.productDetail(n.id);case 2:(t=e.sent)&&y.current&&(a=t.photo,p(b(b({},f),{},{photo:a})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){return y.current=!1}}),[]);var g=function(e){c(e)};return e.createElement("div",{className:"col-10 mx-2 mx-md-4 col-sm-5 col-md-3 mb-5 rounded shadow-4 p-0 "},e.createElement("div",{className:"btn-overlay image-card"},e.createElement("img",{className:"d-block rounded",src:"/assets/"+f.photo,onClick:function(){g("/item/"+f.id)}}),e.createElement("span",{onClick:function(){g("/edit/"+f.id)},style:{padding:0,cursor:"pointer",top:-10,right:-10}},e.createElement("i",{className:"material-icons",style:{padding:15}},"edit"))),e.createElement("div",{className:"d-flex flex-column p-3"},e.createElement("div",{className:"font-roboto text-line-3 title-barlow-1"},f.name," "),e.createElement("div",{className:"d-flex flex-row justify-content-between"},e.createElement("div",{className:"font-noto fw-bold title-noto-2"},(f.price/a).toFixed(8)," ",e.createElement("img",{src:"/assets/images/BNB.png",style:{height:30}})),e.createElement("div",{className:"title-noto-2",style:{fontSize:18}},"Book")),e.createElement("div",{className:"d-flex flex-row mt-4"},e.createElement("i",{className:"material-icons"},"person"),e.createElement("div",{className:"title-barlow-2 fw-bold text-line-1"},f.owner))),e.createElement("div",{className:"px-3 py-2 d-flex justify-content-center flex-row"},e.createElement("div",{className:"px-3 py-2 font-noto fw-bold d-flex justify-content-center flex-row row",style:{color:"#018AD7",cursor:"pointer"}},e.createElement("div",{className:"switch_box box_1 col-8"},e.createElement("input",{type:"checkbox",checked:"ON"==f.status,className:"switch_1",onChange:function(e){var t=e.target.checked;console.log(f),(0,d.default)(e.target).prop("checked",!t);var n=t?"ON":"OFF";u.default.put("/products",f.id,{status:n}).then((function(n){(0,d.default)(e.target).prop("checked",t)})).catch((function(){})),console.log("berubah")}})),e.createElement("span",{className:"font-roboto-2 text-center mt-2"},"Published"))))};return e.createElement("div",{className:"mt-5 row justify-content-center"},p.map((function(t,n){return e.createElement(k,{product:t,key:n})})),w&&e.createElement(f.Spinner,{animation:"border",size:"lg"}),p.length<=0&&!w&&e.createElement("div",{className:"d-flex align-items-center flex-column justify-content-center"},e.createElement("i",{className:"material-icons text-danger",style:{fontSize:100}},"search_off"),e.createElement("div",{className:"title-1 "},"You Haven`t Own Any Product")))},w=function(t){var n,a,c,l=t.order,s=t.index,i=t.setmodalShow,d=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),f=((0,h.useSelector)((function(e){return e.ContractReducers.price})),(0,v.useNavigate)());return e.createElement("tr",null,e.createElement("th",{scope:"row"},s),e.createElement("td",null,l.product&&l.product.name),e.createElement("td",null,l.createdAt),e.createElement("td",null,l.status),e.createElement("td",null,e.createElement("div",{className:"d-flex flex-row"},e.createElement(v.Link,{to:"/order/"+l.id,className:"btn btn-primary me-2"},"Check"),"Confirmation"==l.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return i(l)}},"Feedback"),"Waiting"==l.status&&(n=l.createdAt,a=new Date(n),c=new Date,Math.round(Math.abs((a-c)/864e5))>=7)&&e.createElement("button",{className:"btn btn-success",onClick:function(){return e=l.price,void y.default.fire({title:"Refund Your Payment Product",text:"Your Payment Fee is About "+e+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Refund to Wallet"}).then(function(){var t=(0,o.default)(r.default.mark((function t(n){var a,c,o,s,i,h;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isConfirmed){t.next=16;break}return a=m.ethers.utils.parseUnits(e.toString(),"ether"),c=a.toString(),t.prev=3,t.next=6,d.refund(l.seller_id,c);case 6:o=t.sent,s=o.gasLimit.toNumber(),i=m.ethers.utils.formatEther(o.gasPrice.toNumber()),h=(s*i).toFixed(8),u.default.post("/order/confirm",{id:l.id,status:"Refund",gas:h}).then((function(e){p.Loader.hide(),f(0)})).catch((function(e){p.Loader.hide(),f(0)})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}());var e}},"Refund"))))},x=function(t){var n=t.selling,a=t.index,c=t.setmodalSell,l=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),s=((0,h.useSelector)((function(e){return e.ContractReducers.price})),(0,v.useNavigate)()),i=function(){var e=(0,o.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.default.fire({title:"Claiming Your Payment Product",text:"Your Payment Fee is About "+t+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Claim to Wallet"}).then(function(){var e=(0,o.default)(r.default.mark((function e(a){var c,o,i,d,f,h;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=16;break}return c=m.ethers.utils.parseUnits(t.toString(),"ether"),o=c.toString(),e.prev=3,e.next=6,l.withdraw(o);case 6:i=e.sent,d=i.gasLimit.toNumber(),f=m.ethers.utils.formatEther(i.gasPrice.toNumber()),h=(d*f).toFixed(8),u.default.post("/order/confirm",{id:n.id,status:"Claimed",gas:h}).then((function(e){p.Loader.hide(),s(0)})).catch((function(e){p.Loader.hide(),s(0)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.createElement("tr",null,e.createElement("th",{scope:"row"},a),e.createElement("td",null,n.product&&n.product.name),e.createElement("td",null,n.createdAt),e.createElement("td",null,n.status),e.createElement("td",null,e.createElement("div",{className:"d-flex flex-row"},e.createElement(v.Link,{to:"/order/"+n.id,className:"btn btn-primary me-2"},"Check"),"Waiting"==n.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return c(n)}},"Confirm"),"Finished"==n.status&&e.createElement("button",{className:"btn btn-success",onClick:function(){return i(n.price)}},"Claim"))))};var k=function(){var t=(0,i.useState)([]),n=(0,l.default)(t,2),a=n[0],c=n[1],s=(0,i.useState)("myorder"),d=(0,l.default)(s,2),m=d[0],y=d[1],g=(0,i.useState)([]),k=(0,l.default)(g,2),C=k[0],S=k[1],O=(0,i.useState)({}),P=(0,l.default)(O,2),B=P[0],L=P[1],j=(0,i.useState)(!1),M=(0,l.default)(j,2),F=M[0],_=M[1],R=(0,i.useState)(!1),A=(0,l.default)(R,2),D=A[0],T=A[1],Y=(0,h.useSelector)((function(e){return e.ContractReducers.contract.wallet})),H=(0,h.useSelector)((function(e){return e.ContractReducers.contract.myContract})),z=(0,i.useState)({}),K=(0,l.default)(z,2),W=K[0],U=K[1],G=(0,v.useNavigate)();(0,i.useEffect)((function(){var e=function(){var e=(0,o.default)(r.default.mark((function e(){var t,n,a,c,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.wallets(Y);case 2:t=e.sent,n=t.email,a=t.name,c=t.photo,o=t.profesi,L({email:n,name:a,photo:c,profesi:o});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("addressing"),console.log(Y),null!=Y&&(e(),E.default.get("/myorder",{params:{user_id:Y}}).then((function(e){var t=e.data;c(t.myOrder),S(t.mySelling)})).catch((function(e){})))}),[Y]);var I=function(){var e=(0,o.default)(r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.wallets(t.buyer_id);case 2:n=e.sent,a=n.name,U(b(b({},t),{},{buyer:a})),T(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){U(e),_(!0)},q=function(e){u.default.post("/order/confirm",{id:W.id,status:e}).then((function(e){p.Loader.hide(),G(0)})).catch((function(e){p.Loader.hide(),G(0)}))};return e.createElement("div",{className:"container-xl p-5"},e.createElement("div",{className:"d-flex flex-column flex-md-row justify-content-center my-2"},e.createElement("div",{className:"btn-overlay-bottom align-self-center"},e.createElement("img",{className:"img-card-circle align-self-center",src:B.photo?B.photo:"/assets/images/profilTest.png"}),e.createElement("span",{className:"bg-primary d-inline d-md-none"},e.createElement(v.Link,{to:"/profile/edit",className:"no-style"},e.createElement("i",{className:"material-icons align-self-center p-2",style:{cursor:"pointer"}},"border_color")))),e.createElement("div",{className:"d-flex align-items-center align-items-md-start flex-column justify-content-center mx-2"},e.createElement("div",{className:"title-roboto-1 fw-bold my-1 ",style:{letterSpacing:1}},B.name?B.name:"Unknown Name"),e.createElement("div",{className:"title-noto-2 my-1"},B.email?B.email:"---------------"),e.createElement("div",{className:"title-noto-2 my-1",style:{color:"#666666"}},B.profesi?B.profesi:"---------------")),e.createElement(v.Link,{to:"/profile/edit",className:"no-style"},e.createElement("i",{className:"material-icons align-self-center mx-4 d-none d-md-inline",style:{cursor:"pointer"}},"border_color"))),e.createElement(f.Tab.Container,{id:"left-tabs-example",defaultActiveKey:"galery"},e.createElement(f.Nav,{variant:"pills",className:"flex-row my-3"},e.createElement(f.Nav.Item,{className:"col-6",style:{cursor:"pointer"}},e.createElement(f.Nav.Link,{eventKey:"history",className:"text-center title-roboto-2"},e.createElement("i",{className:"material-icons",style:{verticalAlign:"bottom",fontSize:30}},"history")," ","Activity")),e.createElement(f.Nav.Item,{className:"col-6",style:{cursor:"pointer"}},e.createElement(f.Nav.Link,{eventKey:"galery",className:"text-center title-roboto-2"},e.createElement("i",{className:"material-icons",style:{verticalAlign:"bottom",fontSize:30}},"widgets")," ","My Draft"))),e.createElement(f.Tab.Content,null,e.createElement(f.Tab.Pane,{eventKey:"history"},e.createElement("div",{className:"row"},e.createElement("input",{type:"text",placeholder:"Search .....",className:"shadow-3 rounded-3 p-3 card-search border-0 col-7"}),e.createElement("select",{className:"shadow-3 rounded-3 p-3 card-search border-0 col-4 ms-5","aria-label":"",value:m,onChange:function(e){return y(e.target.value)}},e.createElement("option",{value:"myorder"},"Buying"),e.createElement("option",{value:"mysell"},"Selling"))),e.createElement("div",{className:"table-responsive my-5"},e.createElement("table",{className:"table table-striped"},e.createElement("thead",{className:""},e.createElement("tr",null,e.createElement("th",{scope:"col"},"#"),e.createElement("th",{scope:"col"},"Product Name"),e.createElement("th",{scope:"col"},"Date"),e.createElement("th",{scope:"col"},"Status"),e.createElement("th",{scope:"col"},"Action"))),e.createElement("tbody",null,"myorder"==m?a.map((function(t,n){return e.createElement(w,{key:n,index:n+1,order:t,setmodalShow:J})})):C.map((function(t,n){return e.createElement(x,{key:n,index:n+1,selling:t,setmodalSell:I})}))))),e.createElement(f.Modal,{show:F,onHide:function(){return _(!1)}},e.createElement(f.Modal.Header,{closeButton:!0},e.createElement(f.Modal.Title,{className:"title-1"},"Confirmation Order")),e.createElement(f.Modal.Body,null,e.createElement("div",{className:"title-2"},"Make Sure that you have received your Orders from the Seller!")),e.createElement(f.Modal.Footer,null,e.createElement(f.Button,{variant:"primary",onClick:function(){return q("Finished")}},"Give Feedback"))),e.createElement(f.Modal,{show:D,onHide:function(){return T(!1)}},e.createElement(f.Modal.Header,{closeButton:!0},e.createElement(f.Modal.Title,{className:"title-1"},"Buying Order")),e.createElement(f.Modal.Body,null,e.createElement("div",{className:"title-2"},"Hoolla, Got your Recent Order from :"),e.createElement("div",{className:"mt-2"},"Buyer`s name :"," ",W.buyer?W.buyer:W.buyer_id),e.createElement("div",null,"Buyer`s Email : ",W.email),e.createElement("div",null,"Order`s Date : ",W.createdAt)),e.createElement(f.Modal.Footer,null,e.createElement(f.Button,{variant:"primary",onClick:function(){return q("Confirmation")}},"Confirmed")))),e.createElement(f.Tab.Pane,{eventKey:"galery"},e.createElement(N,null)))))};t.default=k}).call(this,n(0))},598:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=a(n(170)),c={show:function(){(0,r.default)("#loader").removeClass("d-none")},hide:function(){(0,r.default)("#loader").addClass("d-none")}};t.Loader=c},599:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),c=a(n(10)),o=a(n(300)),l=a(n(169)),s=n(598),i=function(){function e(){(0,r.default)(this,e)}return(0,c.default)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){o.default.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){a(e)}))}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){s.Loader.show(),o.default.post(e,t).then((function(e){var t=e.data;s.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){console.log("hiding"),s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){console.log("hiding"),a(e)})):a(e)}))}))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){s.Loader.show(),o.default.put("".concat(e,"/").concat(t),n).then((function(e){var t=e.data;s.Loader.hide(),t&&t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){a(t)})).catch((function(e){})):a(t)})).catch((function(e){s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})):r(e)}))}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){s.Loader.show(),o.default.delete("".concat(e),t).then((function(e){var t=e.data;s.Loader.hide(),t.message?l.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){s.Loader.hide(),e.response&&e.response.data&&e.response.data.message?l.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){a(e)})).catch((function(){})):a(e)}))}))}}]),e}(),u=i;t.default=u},601:function(e,t,n){"use strict";function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}e.exports=a}}]);