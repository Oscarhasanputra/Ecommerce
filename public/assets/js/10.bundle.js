(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{991:function(e,t,a){"use strict";(function(e){var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(17)),s=n(a(23)),l=n(a(53)),c=a(116),i=a(1),o=a(242),d=a(996),u=a(444),m=a(445),f=n(a(240)),h=n(a(997)),v=n(a(443)),p=function(t){var a=t.photo;return null==a?e.createElement("div",{className:"d-flex skeleton",style:{height:100,width:100}},e.createElement("span",{className:"m-auto title-2"},"Image...")):e.createElement("img",{className:"d-block rounded "+(null==a&&"skeleton"),src:a&&"/assets/"+a,style:{height:100,width:100}})},x=function(t){var a=t.text,n=t.date,r=t.status,s=t.txid,l="hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(80+10*Math.random())+"%)";return e.createElement("div",{className:"card p-3 my-3 flex-row",style:{boxShadow:"3px 2px 10px "+l}},e.createElement("span",{className:"align-self-center rounded-circle p-3 text-uppercased title-2",style:{backgroundColor:l}}," ","TX"," "),e.createElement("div",{className:"d-flex flex-column justify-content-center"},e.createElement("div",{className:"font-noto text-line-3"},a),e.createElement("div",{className:"text-muted my-1"},n)),("Waiting"==r||"Claimed"==r||"Refund"==r)&&e.createElement("a",{href:"https://testnet.bscscan.com/tx/"+s,target:"_blank",className:"align-self-center ms-auto"},e.createElement("i",{className:"material-icons",style:{fontSize:45}},"document_scanner")))};var w=function(){var t=(0,c.useParams)().id,a=(0,c.useNavigate)(),n=(0,o.useSelector)((function(e){return e.ContractReducers.contract})),w=(0,i.useState)({}),g=(0,l.default)(w,2),y=g[0],N=g[1],E=(0,i.useState)({}),b=(0,l.default)(E,2),C=b[0],k=b[1];(0,i.useEffect)((function(){var e=n.wallet,a=n.myContract;n.wallet&&v.default.get("/order/"+t,{params:{user_id:e}}).then((function(t){var n=t.data[0];try{var l=n.orders_details.filter((function(t,a){return null==t.readStatus||t.readStatus.indexOf(e)<0})).map((function(t,a){return{readStatus:"".concat(t.readStatus,",").concat(e),id:t.id}}));l.length>0&&v.default.post("/orderDetail/read",{data:l}).then((function(e){})).catch((function(e){}))}catch(e){}var c=n.product_id;a.productDetail(c).then(function(){var e=(0,s.default)(r.default.mark((function e(t){var n,s,l,c,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.photo,s=t.name,l=t.owner,c=t.category,e.next=3,a.wallets(l);case 3:i=e.sent,o=i.name?i.name:l,k({photo:n,name:s,owner:l,category:c,price:t.price.toNumber(),seller:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){})),N(n)})).catch((function(e){}))}),[t,n]);var S,L,_,B=function(e){h.default.post("/order/confirm",{id:y.id,status:e}).then((function(e){d.Loader.hide(),a(0)})).catch((function(e){d.Loader.hide(),a(0)}))},P=function(){var e=(0,s.default)(r.default.mark((function e(t){var l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n.myContract,f.default.fire({title:"Claiming Your Payment Product",text:"Your Payment Fee is About "+t+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Claim to Wallet"}).then(function(){var e=(0,s.default)(r.default.mark((function e(n){var s,c,i,o,u,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=14;break}return s=m.ethers.utils.parseUnits(t.toString(),"ether"),c=s.toString(),d.Loader.show("Initializing Wallet for Confirmation...."),e.next=6,l.withdraw(c);case 6:return i=e.sent,d.Loader.show(" Claim Saldo to your Wallet..."),e.next=10,i.wait();case 10:o=i.gasLimit.toNumber(),u=m.ethers.utils.formatEther(i.gasPrice.toNumber()),f=(o*u).toFixed(8),h.default.post("/order/confirm",{id:y.id,status:"Claimed",gas:f,txid:i.hash}).then((function(e){d.Loader.hide(),a(0)})).catch((function(e){d.Loader.hide(),a(0)}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=y.orders_details&&y.orders_details.reduce((function(e,t){return{gas:e.gas+t.gas}})).gas;return e.createElement("div",{className:"container-xl p-5"},e.createElement("div",{className:"card rounded-3 shadow-sm p-4"},e.createElement("div",{className:"d-flex flex-column flex-sm-row justify-content-between"},e.createElement("div",{className:"title-2 my-2"},"No. Order : ",t),e.createElement("div",{className:"title-2 my-2"},"Status : ",y.status)),e.createElement("div",{className:"title-2 my-2 text-line-1"},"Invoice No :",e.createElement("span",{className:"title-2 text-line-1"},n.wallet,t)),e.createElement("div",{className:"d-flex flex-column justify-content-center justify-content-sm-start flex-sm-row mt-4"},e.createElement("div",{className:"p-2 rounded order-image align-self-center mb-4"},e.createElement(p,{photo:C.photo})),!C.name&&e.createElement("div",{className:"mx-3 d-flex flex-column justify-content-between",style:{flexGrow:1}},e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"}),e.createElement("div",{className:"skeleton skeleton-text"})),C.name&&e.createElement("div",{className:"mx-3 d-flex flex-column justify-content-between"},e.createElement("div",{className:"title-2 text-center text-sm-start"},C.name),e.createElement("div",{className:"d-flex flex-column mt-2 flex-sm-row justify-content-between"},e.createElement("div",{className:"align-self-center"},"Qty : 1"),e.createElement("div",{className:"align-self-center"},"Price : ",e.createElement("span",{className:"d-inline-block"},y.price," "),e.createElement("img",{src:"/assets/images/BNB.png",height:"30"}))),e.createElement("div",{className:"text-center text-sm-start"},e.createElement("span",{className:"d-none d-sm-inline"},"Email Buyer :"),e.createElement("span",{className:"d-inline-block text-line-1"},y.email)),e.createElement("div",{className:"font-nato d-flex justify-content-center justify-content-sm-start my-2"},e.createElement("span",{className:"material-icons align-self-center me-1 text-primary"},"account_circle")," ",C.seller&&C.seller.name?C.seller.name:C.seller,e.createElement("span",{className:"material-icons align-self-center ms-5 me-1 text-danger"},"favorite")," ",y.product&&y.product.rating))),e.createElement("div",{className:"my-3"},e.createElement("div",{className:"title-2"},"History"),!y.orders_details&&e.createElement("div",{className:"d-flex flex-row justify-content-center"},e.createElement(u.Spinner,{animation:"border",variant:"primary",size:"lg"})),y.orders_details&&(y.orders_details?y.orders_details:[]).map((function(t,a){var n=t.status,r=t.txid,s="Waiting"==n?"Succesfully sent the Order to Seller":"Confirmation"==n?"Confirmed the Order and has sent Email to "+y.email+" by Seller":"Finished"==n?"Order Successfully Accepted by buyer and Payment has been paid":"Refund"==n?"Refund Payment by Buyer":"Payment Fee has been Claimed by Seller";return e.createElement(x,{key:a,text:s,date:t.createdAt,status:n,txid:r})}))),"Waiting"==y.status&&y.seller_id==n.wallet&&e.createElement("div",{className:"d-flex flex-row align-self-end btn btn-primary",onClick:function(){return B("Confirmation")}},"Confirmation"),"Confirmation"==y.status&&y.buyer_id==n.wallet&&e.createElement("div",{className:"d-flex flex-row align-self-end btn btn-primary",onClick:function(){return B("Finished")}},"Give Feedback"),"Finished"==y.status&&y.seller_id==n.wallet&&e.createElement("div",{className:"d-flex flex-row align-self-end btn btn-primary",onClick:function(){return P(y.price)}},"Claim"),"Waiting"==y.status&&(S=y.createdAt,L=new Date(S),_=new Date,Math.round(Math.abs((L-_)/864e5))>=3)&&y.buyer_id==n.wallet&&e.createElement("button",{className:"btn btn-success d-flex flex-row align-self-end ",onClick:function(){return e=y.price,t=n.myContract,void f.default.fire({title:"Refund Your Payment Product",text:"Your Payment Fee is About "+e+" BNB",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Refund to Wallet"}).then(function(){var n=(0,s.default)(r.default.mark((function n(s){var l,c,i,o,u,f;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s.isConfirmed){n.next=19;break}return l=m.ethers.utils.parseUnits(e.toString(),"ether"),c=l.toString(),n.prev=3,d.Loader.show("Initializing Wallet for Confirmation...."),n.next=7,t.refund(y.seller_id,c);case 7:return i=n.sent,d.Loader.show("Refund Saldo to your Wallet..."),n.next=11,i.wait();case 11:o=i.gasLimit.toNumber(),u=m.ethers.utils.formatEther(i.gasPrice.toNumber()),f=(o*u).toFixed(8),h.default.post("/order/confirm",{id:y.id,status:"Refund",gas:f,txid:i.hash}).then((function(e){d.Loader.hide(),a(0)})).catch((function(e){d.Loader.hide(),a(0)})),n.next=19;break;case 17:n.prev=17,n.t0=n.catch(3);case 19:case"end":return n.stop()}}),n,null,[[3,17]])})));return function(e){return n.apply(this,arguments)}}());var e,t}},"Refund"),("Claimed"==y.status||"Refund"==y.status)&&y.orders_details&&e.createElement("div",{className:" row"},e.createElement("div",{className:"col-sm-3 col-md-5 col-lg-7"}),e.createElement("div",{className:"ms-sm-4 ms-md-6 col-12 col-sm-8 col-md-6 col-lg-4 d-flex flex-column p-4 rounded "},e.createElement("div",{className:"fw-bolder title-2"},"PRICE DETAIL"),e.createElement("hr",null),e.createElement("div",{className:"d-flex flex-row justify-content-between"},e.createElement("div",{className:"fw-bold"},"Sub Total"),e.createElement("div",{className:"fw-bold"},y.price," BNB")),e.createElement("div",{className:"d-flex flex-row justify-content-between my-2 mb-3"},e.createElement("div",{className:"text-muted"},"Total Gas Fee"),e.createElement("div",{className:"fw-bold"},j," BNB")),e.createElement("hr",{className:""}),e.createElement("div",{className:"d-flex flex-row justify-content-between mb-4"},e.createElement("div",{className:"fw-bolder"},"Total Amount"),e.createElement("div",{className:"fw-bold"},j+y.price," BNB"))))))};t.default=w}).call(this,a(1))},996:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n(a(241)),s={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(0,r.default)("#loaderText").text(e):(0,r.default)("#loaderText").text("Please Wait..."),(0,r.default)("#loader").removeClass("d-none")},hide:function(){(0,r.default)("#loader").addClass("d-none")}};t.Loader=s},997:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(8)),s=n(a(9)),l=n(a(443)),c=n(a(240)),i=a(996),o=function(){function e(){(0,r.default)(this,e)}return(0,s.default)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){l.default.get(e,{params:t}).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){i.Loader.show(),l.default.post(e,t).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?c.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){a(t)})).catch((function(e){})):a(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?c.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){n(e)})):n(e)}))}))}},{key:"put",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,r){i.Loader.show(),l.default.put("".concat(e,"/").concat(t),a).then((function(e){var t=e.data;i.Loader.hide(),t&&t.message?c.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){n(t)})).catch((function(e){})):n(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?c.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){r(e)})):r(e)}))}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){i.Loader.show(),l.default.delete("".concat(e),t).then((function(e){var t=e.data;i.Loader.hide(),t.message?c.default.fire({icon:"success",title:"Success",text:"".concat(t.message),timer:1e3}).then((function(){a(t)})).catch((function(e){})):a(t)})).catch((function(e){i.Loader.hide(),e.response&&e.response.data&&e.response.data.message?c.default.fire({icon:"error",title:"Failed",text:"".concat(e.response.data.message),timer:1e3}).then((function(){n(e)})).catch((function(){})):n(e)}))}))}}]),e}(),d=o;t.default=d}}]);